### 依赖
rocketmq-spring-boot-starter

### 发送消息
```java
@Autowired
private RocketMQTemplate rocketMQTemplate;

// 把id发过去，id代表用对应id文件夹的数据执行python脚本
public void sendMessage(String topic, String id) {
	rocketMQTemplate.asyncSend(topic, id, new SendCallback() {

		@Override
		public void onSuccess(SendResult sendResult) {
			System.out.println("success!");
		}

		@Override
		public void onException(Throwable throwable) {
			//可以处理相应的业务
		}
	});
}
```

### 接收消息
```java
@Component
@RocketMQMessageListener(topic = "rockettest", consumerGroup = "myconsumer")
public class ConsumerService implements RocketMQListener<String> {

    @Autowired
    TrainedDataRepository trainedDataRepository;

    @Autowired
    TrainModelService trainModelService;

    @Override
    public void onMessage(String id) {
        try {
            System.out.println("接收的数据: " + id);
            // 要这样子传过来而不是只传ID就不会报错
//            TrainedData trainedData = JSON.parseObject(message, TrainedData.class);
            trainModelService.trainModel(Long.valueOf(id));
        } catch (IOException | InterruptedException e) {
        }
    }
}
```

### 训练模型
```java
String command = "python " + path + "\\static\\trainModel.py " + trainedData.getFolderId();
Process process = Runtime.getRuntime().exec(command);
int exitCode = process.waitFor();
// 等到exitCode=0时训练完成
```